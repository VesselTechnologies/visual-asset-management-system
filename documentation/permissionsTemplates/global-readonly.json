{
  "metadata": {
    "name": "Global Read-Only",
    "description": "Read-only access across all databases. Similar to the built-in basicReadOnly role. Does not include admin page access.",
    "version": "1.0"
  },
  "variables": [
    {"name": "ROLE_NAME", "required": true, "description": "The role name to create"}
  ],
  "constraints": [
    {
      "name": "{{ROLE_NAME}}-web-routes",
      "description": "Allow navigation to standard viewing pages",
      "objectType": "web",
      "criteriaAnd": [],
      "criteriaOr": [
        {"field": "route__path", "operator": "starts_with", "value": "/assets"},
        {"field": "route__path", "operator": "starts_with", "value": "/databases"},
        {"field": "route__path", "operator": "starts_with", "value": "/pipelines"},
        {"field": "route__path", "operator": "starts_with", "value": "/search"},
        {"field": "route__path", "operator": "starts_with", "value": "/workflows"}
      ],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-api-routes-get",
      "description": "Allow GET API access",
      "objectType": "api",
      "criteriaAnd": [],
      "criteriaOr": [
        {"field": "route__path", "operator": "starts_with", "value": "/secure-config"},
        {"field": "route__path", "operator": "starts_with", "value": "/amplify-config"},
        {"field": "route__path", "operator": "starts_with", "value": "/auth/routes"},
        {"field": "route__path", "operator": "starts_with", "value": "/asset-links"},
        {"field": "route__path", "operator": "starts_with", "value": "/assets"},
        {"field": "route__path", "operator": "starts_with", "value": "/comments"},
        {"field": "route__path", "operator": "starts_with", "value": "/database"},
        {"field": "route__path", "operator": "starts_with", "value": "/metadata"},
        {"field": "route__path", "operator": "starts_with", "value": "/metadataschema"},
        {"field": "route__path", "operator": "starts_with", "value": "/pipelines"},
        {"field": "route__path", "operator": "starts_with", "value": "/search"},
        {"field": "route__path", "operator": "starts_with", "value": "/subscriptions"},
        {"field": "route__path", "operator": "starts_with", "value": "/check-subscription"},
        {"field": "route__path", "operator": "starts_with", "value": "/tags"},
        {"field": "route__path", "operator": "starts_with", "value": "/tag-types"},
        {"field": "route__path", "operator": "starts_with", "value": "/workflows"},
        {"field": "route__path", "operator": "starts_with", "value": "/buckets"}
      ],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-api-routes-post",
      "description": "Allow non-mutating POST API access",
      "objectType": "api",
      "criteriaAnd": [],
      "criteriaOr": [
        {"field": "route__path", "operator": "starts_with", "value": "/auth/routes"},
        {"field": "route__path", "operator": "starts_with", "value": "/search"},
        {"field": "route__path", "operator": "starts_with", "value": "/check-subscription"}
      ],
      "groupPermissions": [
        {"action": "POST", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-databases",
      "description": "Allow read access to all databases",
      "objectType": "database",
      "criteriaAnd": [
        {"field": "databaseId", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-assets",
      "description": "Allow read access to all assets",
      "objectType": "asset",
      "criteriaAnd": [
        {"field": "databaseId", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-pipelines",
      "description": "Allow read access to all pipelines",
      "objectType": "pipeline",
      "criteriaAnd": [
        {"field": "databaseId", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-workflows",
      "description": "Allow read access to all workflows",
      "objectType": "workflow",
      "criteriaAnd": [
        {"field": "databaseId", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-metadataschemas",
      "description": "Allow read access to all metadata schemas",
      "objectType": "metadataSchema",
      "criteriaAnd": [
        {"field": "databaseId", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-tags",
      "description": "Allow read access to all tags",
      "objectType": "tag",
      "criteriaAnd": [
        {"field": "tagName", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    },
    {
      "name": "{{ROLE_NAME}}-tagtypes",
      "description": "Allow read access to all tag types",
      "objectType": "tagType",
      "criteriaAnd": [
        {"field": "tagTypeName", "operator": "contains", "value": ".*"}
      ],
      "criteriaOr": [],
      "groupPermissions": [
        {"action": "GET", "type": "allow"}
      ]
    }
  ]
}
